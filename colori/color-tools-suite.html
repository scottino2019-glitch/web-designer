<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Color Tools Suite</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      height: 100%;
      width: 100%;
    }

    html {
      height: 100%;
      width: 100%;
    }

    * {
      box-sizing: border-box;
    }

    .app-container {
      min-height: 100%;
      width: 100%;
      padding: 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .app-title {
      font-size: 48px;
      font-weight: 700;
      margin: 0;
      letter-spacing: -1px;
    }

    .tabs-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 30px;
      overflow-x: auto;
      padding-bottom: 8px;
    }

    .tab {
      padding: 14px 24px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
    }

    .tab:hover {
      transform: translateY(-2px);
    }

    .tab.active {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .tool-card {
      padding: 32px;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      margin-bottom: 24px;
    }

    .color-display {
      width: 100%;
      height: 200px;
      border-radius: 12px;
      margin-bottom: 24px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .input-group {
      margin-bottom: 20px;
    }

    .input-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    input[type="color"] {
      width: 80px;
      height: 80px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.2s ease;
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: rgba(0, 0, 0, 0.3);
    }

    .btn {
      padding: 14px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    }

    .btn-full {
      width: 100%;
    }

    .gradient-preview {
      width: 100%;
      height: 200px;
      border-radius: 12px;
      margin: 20px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .color-inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 20px;
    }

    .palette-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }

    .palette-color {
      height: 120px;
      border-radius: 12px;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .palette-color:hover {
      transform: scale(1.05);
    }

    .contrast-result {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
    }

    .contrast-ratio {
      font-size: 48px;
      font-weight: 700;
    }

    .contrast-badges {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .badge {
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
    }

    .badge.pass {
      background: #10b981;
      color: white;
    }

    .badge.fail {
      background: #ef4444;
      color: white;
    }

    .converter-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }

    .converter-box {
      padding: 20px;
      border-radius: 12px;
      border: 2px solid rgba(0, 0, 0, 0.1);
    }

    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      padding: 16px 32px;
      border-radius: 12px;
      font-weight: 600;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      opacity: 0;
      transition: all 0.3s ease;
      pointer-events: none;
      z-index: 1000;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    .code-output {
      padding: 16px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      margin: 12px 0;
      word-break: break-all;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
<div id="breadcrumb-container" style="
  position: sticky; top: 0; z-index: 9999 !important; 
  background: rgba(255,255,255,0.98) !important; 
  backdrop-filter: blur(20px) !important; 
  border-bottom: 1px solid #e5e7eb !important; 
  padding: 16px 24px !important; 
  box-shadow: 0 2px 10px rgba(0,0,0,0.1) !important;
  margin: 0 !important;
">
  <div style="max-width: 1280px; margin: 0 auto;">
    <div style="font-size: 24px; font-weight: 800; background: linear-gradient(135deg, #ec4899, #f59e0b); -webkit-background-clip: text; background-clip: text; color: transparent; margin-bottom: 12px;">
      üé® Color Tools Hub
    </div>
    <ol id="breadcrumb" style="
      display: flex !important; align-items: center !important; 
      list-style: none !important; padding: 0 !important; margin: 0 !important;
      gap: 8px !important; font-size: 14px !important;
    "></ol>
  </div>
</div>
  <div class="app-container">
   <header class="header">
    <h1 class="app-title" id="app-title">Color Tools Suite</h1>
   </header>
   <div class="tabs-container">
    <div class="tabs"><button class="tab active" data-tab="picker">üé® Color Picker</button> <button class="tab" data-tab="gradient">üåà Gradient</button> <button class="tab" data-tab="palette">üé≠ Palette</button> <button class="tab" data-tab="contrast">‚úì Contrast</button> <button class="tab" data-tab="converter">üîÑ Converter</button>
    </div><!-- Color Picker Tab -->
    <div class="tab-content active" id="picker">
     <div class="tool-card">
      <div class="color-display" id="picker-display"></div>
      <div class="color-inputs">
       <div class="input-group"><label class="input-label">Pick Color</label> <input type="color" id="picker-color" value="#6366f1">
       </div>
       <div class="input-group"><label for="picker-hex" class="input-label">HEX</label> <input type="text" id="picker-hex" value="#6366F1">
       </div>
       <div class="input-group"><label for="picker-rgb" class="input-label">RGB</label> <input type="text" id="picker-rgb" value="rgb(99, 102, 241)" readonly>
       </div>
      </div><button class="btn btn-full" id="picker-copy">Copy HEX Code</button>
     </div>
    </div><!-- Gradient Generator Tab -->
    <div class="tab-content" id="gradient">
     <div class="tool-card">
      <div class="gradient-preview" id="gradient-preview"></div>
      <div class="color-inputs">
       <div class="input-group"><label class="input-label">Color 1</label> <input type="color" id="grad-color1" value="#6366f1">
       </div>
       <div class="input-group"><label class="input-label">Color 2</label> <input type="color" id="grad-color2" value="#ec4899">
       </div>
       <div class="input-group"><label for="grad-direction" class="input-label">Direction</label> <select id="grad-direction"> <option value="to right">Left to Right</option> <option value="to left">Right to Left</option> <option value="to bottom">Top to Bottom</option> <option value="to top">Bottom to Top</option> <option value="135deg">Diagonal ‚Üò</option> <option value="45deg">Diagonal ‚Üó</option> </select>
       </div>
      </div>
      <div class="code-output" id="gradient-code">
       background: linear-gradient(to right, #6366f1, #ec4899);
      </div><button class="btn btn-full" id="gradient-copy">Copy CSS Code</button>
     </div>
    </div><!-- Palette Generator Tab -->
    <div class="tab-content" id="palette">
     <div class="tool-card">
      <div class="input-group"><label class="input-label">Base Color</label> <input type="color" id="palette-base" value="#6366f1">
      </div>
      <div class="input-group"><label for="palette-type" class="input-label">Harmony Type</label> <select id="palette-type"> <option value="complementary">Complementary</option> <option value="analogous">Analogous</option> <option value="triadic">Triadic</option> <option value="tetradic">Tetradic</option> <option value="monochromatic">Monochromatic</option> </select>
      </div><button class="btn btn-full" id="palette-generate">Generate Palette</button>
      <div class="palette-grid" id="palette-grid"></div>
     </div>
    </div><!-- Contrast Checker Tab -->
    <div class="tab-content" id="contrast">
     <div class="tool-card">
      <div class="color-inputs">
       <div class="input-group"><label class="input-label">Foreground Color</label> <input type="color" id="contrast-fg" value="#000000">
       </div>
       <div class="input-group"><label class="input-label">Background Color</label> <input type="color" id="contrast-bg" value="#ffffff">
       </div>
      </div>
      <div class="contrast-result" id="contrast-result">
       <div>
        <div class="contrast-ratio" id="contrast-ratio">
         21:1
        </div>
        <div class="contrast-badges" id="contrast-badges"></div>
       </div>
       <div style="padding: 24px; border-radius: 12px; font-size: 24px; font-weight: 600;" id="contrast-sample">
        Sample Text
       </div>
      </div>
     </div>
    </div><!-- Converter Tab -->
    <div class="tab-content" id="converter">
     <div class="tool-card">
      <div class="color-display" id="converter-display"></div>
      <div class="converter-grid">
       <div class="converter-box"><label for="conv-hex" class="input-label">HEX</label> <input type="text" id="conv-hex" value="#6366F1"> <button class="btn btn-full" style="margin-top: 12px;" id="conv-hex-copy">Copy</button>
       </div>
       <div class="converter-box"><label for="conv-rgb-r" class="input-label">RGB</label>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;"><input type="number" id="conv-rgb-r" value="99" min="0" max="255" placeholder="R"> <input type="number" id="conv-rgb-g" value="102" min="0" max="255" placeholder="G"> <input type="number" id="conv-rgb-b" value="241" min="0" max="255" placeholder="B">
        </div><button class="btn btn-full" id="conv-rgb-copy">Copy</button>
       </div>
       <div class="converter-box"><label for="conv-hsl-h" class="input-label">HSL</label>
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 12px;"><input type="number" id="conv-hsl-h" value="239" min="0" max="360" placeholder="H"> <input type="number" id="conv-hsl-s" value="84" min="0" max="100" placeholder="S"> <input type="number" id="conv-hsl-l" value="67" min="0" max="100" placeholder="L">
        </div><button class="btn btn-full" id="conv-hsl-copy">Copy</button>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <div class="toast" id="toast">
   Copied to clipboard! ‚úì
  </div>
  <script>
    const defaultConfig = {
      background_color: "#f0f4f8",
      card_color: "#ffffff",
      text_color: "#1a202c",
      primary_color: "#6366f1",
      accent_color: "#ec4899",
      font_family: "Inter",
      font_size: 16,
      app_title: "Color Tools Suite"
    };

    let config = {};

    // Helper Functions
    function hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : null;
    }

    function rgbToHex(r, g, b) {
      return "#" + [r, g, b].map(x => {
        const hex = x.toString(16);
        return hex.length === 1 ? "0" + hex : hex;
      }).join('');
    }

    function rgbToHsl(r, g, b) {
      r /= 255;
      g /= 255;
      b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0;
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
          case g: h = ((b - r) / d + 2) / 6; break;
          case b: h = ((r - g) / d + 4) / 6; break;
        }
      }
      return {
        h: Math.round(h * 360),
        s: Math.round(s * 100),
        l: Math.round(l * 100)
      };
    }

    function hslToRgb(h, s, l) {
      h /= 360;
      s /= 100;
      l /= 100;
      let r, g, b;

      if (s === 0) {
        r = g = b = l;
      } else {
        const hue2rgb = (p, q, t) => {
          if (t < 0) t += 1;
          if (t > 1) t -= 1;
          if (t < 1/6) return p + (q - p) * 6 * t;
          if (t < 1/2) return q;
          if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
          return p;
        };
        const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
        const p = 2 * l - q;
        r = hue2rgb(p, q, h + 1/3);
        g = hue2rgb(p, q, h);
        b = hue2rgb(p, q, h - 1/3);
      }
      return {
        r: Math.round(r * 255),
        g: Math.round(g * 255),
        b: Math.round(b * 255)
      };
    }

    function getLuminance(r, g, b) {
      const [rs, gs, bs] = [r, g, b].map(c => {
        c = c / 255;
        return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
      });
      return 0.2126 * rs + 0.7152 * gs + 0.0722 * bs;
    }

    function getContrastRatio(fg, bg) {
      const fgRgb = hexToRgb(fg);
      const bgRgb = hexToRgb(bg);
      const l1 = getLuminance(fgRgb.r, fgRgb.g, fgRgb.b);
      const l2 = getLuminance(bgRgb.r, bgRgb.g, bgRgb.b);
      const lighter = Math.max(l1, l2);
      const darker = Math.min(l1, l2);
      return (lighter + 0.05) / (darker + 0.05);
    }

    function generatePalette(baseColor, type) {
      const rgb = hexToRgb(baseColor);
      const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
      const colors = [];

      switch(type) {
        case 'complementary':
          colors.push(baseColor);
          const compRgb = hslToRgb((hsl.h + 180) % 360, hsl.s, hsl.l);
          colors.push(rgbToHex(compRgb.r, compRgb.g, compRgb.b));
          break;
        case 'analogous':
          for (let i = -30; i <= 30; i += 15) {
            const analogRgb = hslToRgb((hsl.h + i + 360) % 360, hsl.s, hsl.l);
            colors.push(rgbToHex(analogRgb.r, analogRgb.g, analogRgb.b));
          }
          break;
        case 'triadic':
          for (let i = 0; i < 360; i += 120) {
            const triadRgb = hslToRgb((hsl.h + i) % 360, hsl.s, hsl.l);
            colors.push(rgbToHex(triadRgb.r, triadRgb.g, triadRgb.b));
          }
          break;
        case 'tetradic':
          for (let i = 0; i < 360; i += 90) {
            const tetradRgb = hslToRgb((hsl.h + i) % 360, hsl.s, hsl.l);
            colors.push(rgbToHex(tetradRgb.r, tetradRgb.g, tetradRgb.b));
          }
          break;
        case 'monochromatic':
          for (let l = 20; l <= 80; l += 15) {
            const monoRgb = hslToRgb(hsl.h, hsl.s, l);
            colors.push(rgbToHex(monoRgb.r, monoRgb.g, monoRgb.b));
          }
          break;
      }
      return colors;
    }

    function showToast() {
      const toast = document.getElementById('toast');
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 2000);
    }

    async function copyToClipboard(text) {
      try {
        if (navigator.clipboard && navigator.clipboard.writeText) {
          await navigator.clipboard.writeText(text);
          showToast();
        } else {
          const textArea = document.createElement('textarea');
          textArea.value = text;
          textArea.style.position = 'fixed';
          textArea.style.left = '-999999px';
          document.body.appendChild(textArea);
          textArea.select();
          document.execCommand('copy');
          textArea.remove();
          showToast();
        }
      } catch (err) {
        console.error('Copy failed:', err);
      }
    }

    // Tab Navigation
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById(tab.dataset.tab).classList.add('active');
      });
    });

    // Color Picker
    const pickerColor = document.getElementById('picker-color');
    const pickerHex = document.getElementById('picker-hex');
    const pickerRgb = document.getElementById('picker-rgb');
    const pickerDisplay = document.getElementById('picker-display');

    function updatePicker(color) {
      pickerDisplay.style.backgroundColor = color;
      const rgb = hexToRgb(color);
      if (rgb) {
        pickerRgb.value = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
      }
    }

    pickerColor.addEventListener('input', (e) => {
      pickerHex.value = e.target.value.toUpperCase();
      updatePicker(e.target.value);
    });

    pickerHex.addEventListener('input', (e) => {
      let value = e.target.value;
      if (!value.startsWith('#')) value = '#' + value;
      if (/^#[0-9A-F]{6}$/i.test(value)) {
        pickerColor.value = value;
        updatePicker(value);
      }
    });

    document.getElementById('picker-copy').addEventListener('click', () => {
      copyToClipboard(pickerHex.value);
    });

    // Gradient Generator
    const gradColor1 = document.getElementById('grad-color1');
    const gradColor2 = document.getElementById('grad-color2');
    const gradDirection = document.getElementById('grad-direction');
    const gradPreview = document.getElementById('gradient-preview');
    const gradCode = document.getElementById('gradient-code');

    function updateGradient() {
      const css = `linear-gradient(${gradDirection.value}, ${gradColor1.value}, ${gradColor2.value})`;
      gradPreview.style.background = css;
      gradCode.textContent = `background: ${css};`;
    }

    gradColor1.addEventListener('input', updateGradient);
    gradColor2.addEventListener('input', updateGradient);
    gradDirection.addEventListener('change', updateGradient);

    document.getElementById('gradient-copy').addEventListener('click', () => {
      copyToClipboard(gradCode.textContent);
    });

    // Palette Generator
    const paletteBase = document.getElementById('palette-base');
    const paletteType = document.getElementById('palette-type');
    const paletteGrid = document.getElementById('palette-grid');

    document.getElementById('palette-generate').addEventListener('click', () => {
      const colors = generatePalette(paletteBase.value, paletteType.value);
      paletteGrid.innerHTML = '';
      colors.forEach(color => {
        const div = document.createElement('div');
        div.className = 'palette-color';
        div.style.backgroundColor = color;
        div.textContent = color;
        const rgb = hexToRgb(color);
        const luminance = getLuminance(rgb.r, rgb.g, rgb.b);
        div.style.color = luminance > 0.5 ? '#000' : '#fff';
        div.addEventListener('click', () => copyToClipboard(color));
        paletteGrid.appendChild(div);
      });
    });

    // Contrast Checker
    const contrastFg = document.getElementById('contrast-fg');
    const contrastBg = document.getElementById('contrast-bg');
    const contrastRatio = document.getElementById('contrast-ratio');
    const contrastBadges = document.getElementById('contrast-badges');
    const contrastSample = document.getElementById('contrast-sample');

    function updateContrast() {
      const ratio = getContrastRatio(contrastFg.value, contrastBg.value);
      contrastRatio.textContent = `${ratio.toFixed(2)}:1`;
      contrastSample.style.color = contrastFg.value;
      contrastSample.style.backgroundColor = contrastBg.value;

      const badges = [
        { text: 'WCAG AA Normal', pass: ratio >= 4.5 },
        { text: 'WCAG AA Large', pass: ratio >= 3 },
        { text: 'WCAG AAA Normal', pass: ratio >= 7 },
        { text: 'WCAG AAA Large', pass: ratio >= 4.5 }
      ];

      contrastBadges.innerHTML = badges.map(b => 
        `<span class="badge ${b.pass ? 'pass' : 'fail'}">${b.text} ${b.pass ? '‚úì' : '‚úó'}</span>`
      ).join('');
    }

    contrastFg.addEventListener('input', updateContrast);
    contrastBg.addEventListener('input', updateContrast);

    // Converter
    const convHex = document.getElementById('conv-hex');
    const convRgbR = document.getElementById('conv-rgb-r');
    const convRgbG = document.getElementById('conv-rgb-g');
    const convRgbB = document.getElementById('conv-rgb-b');
    const convHslH = document.getElementById('conv-hsl-h');
    const convHslS = document.getElementById('conv-hsl-s');
    const convHslL = document.getElementById('conv-hsl-l');
    const convDisplay = document.getElementById('converter-display');

    function updateFromHex() {
      const hex = convHex.value;
      if (!/^#[0-9A-F]{6}$/i.test(hex)) return;
      const rgb = hexToRgb(hex);
      convRgbR.value = rgb.r;
      convRgbG.value = rgb.g;
      convRgbB.value = rgb.b;
      const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
      convHslH.value = hsl.h;
      convHslS.value = hsl.s;
      convHslL.value = hsl.l;
      convDisplay.style.backgroundColor = hex;
    }

    function updateFromRgb() {
      const r = parseInt(convRgbR.value) || 0;
      const g = parseInt(convRgbG.value) || 0;
      const b = parseInt(convRgbB.value) || 0;
      const hex = rgbToHex(r, g, b);
      convHex.value = hex.toUpperCase();
      const hsl = rgbToHsl(r, g, b);
      convHslH.value = hsl.h;
      convHslS.value = hsl.s;
      convHslL.value = hsl.l;
      convDisplay.style.backgroundColor = hex;
    }

    function updateFromHsl() {
      const h = parseInt(convHslH.value) || 0;
      const s = parseInt(convHslS.value) || 0;
      const l = parseInt(convHslL.value) || 0;
      const rgb = hslToRgb(h, s, l);
      convRgbR.value = rgb.r;
      convRgbG.value = rgb.g;
      convRgbB.value = rgb.b;
      const hex = rgbToHex(rgb.r, rgb.g, rgb.b);
      convHex.value = hex.toUpperCase();
      convDisplay.style.backgroundColor = hex;
    }

    convHex.addEventListener('input', updateFromHex);
    convRgbR.addEventListener('input', updateFromRgb);
    convRgbG.addEventListener('input', updateFromRgb);
    convRgbB.addEventListener('input', updateFromRgb);
    convHslH.addEventListener('input', updateFromHsl);
    convHslS.addEventListener('input', updateFromHsl);
    convHslL.addEventListener('input', updateFromHsl);

    document.getElementById('conv-hex-copy').addEventListener('click', () => {
      copyToClipboard(convHex.value);
    });

    document.getElementById('conv-rgb-copy').addEventListener('click', () => {
      copyToClipboard(`rgb(${convRgbR.value}, ${convRgbG.value}, ${convRgbB.value})`);
    });

    document.getElementById('conv-hsl-copy').addEventListener('click', () => {
      copyToClipboard(`hsl(${convHslH.value}, ${convHslS.value}%, ${convHslL.value}%)`);
    });

    // Initialize
    updatePicker('#6366f1');
    updateGradient();
    updateContrast();
    updateFromHex();

    // Element SDK
    async function onConfigChange(newConfig) {
      const appContainer = document.querySelector('.app-container');
      const appTitle = document.getElementById('app-title');
      const toolCards = document.querySelectorAll('.tool-card');
      const tabs = document.querySelectorAll('.tab');
      const buttons = document.querySelectorAll('.btn');
      const toast = document.getElementById('toast');
      const baseFontStack = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif';

      const backgroundColor = newConfig.background_color || defaultConfig.background_color;
      const cardColor = newConfig.card_color || defaultConfig.card_color;
      const textColor = newConfig.text_color || defaultConfig.text_color;
      const primaryColor = newConfig.primary_color || defaultConfig.primary_color;
      const accentColor = newConfig.accent_color || defaultConfig.accent_color;
      const fontFamily = newConfig.font_family || defaultConfig.font_family;
      const fontSize = newConfig.font_size || defaultConfig.font_size;

      appContainer.style.backgroundColor = backgroundColor;
      appTitle.style.color = textColor;
      
      toolCards.forEach(card => {
        card.style.backgroundColor = cardColor;
        card.style.color = textColor;
      });

      tabs.forEach(tab => {
        tab.style.backgroundColor = cardColor;
        tab.style.color = textColor;
        if (tab.classList.contains('active')) {
          tab.style.backgroundColor = primaryColor;
          tab.style.color = '#ffffff';
        }
      });

      buttons.forEach(btn => {
        btn.style.backgroundColor = primaryColor;
        btn.style.color = '#ffffff';
      });

      toast.style.backgroundColor = accentColor;
      toast.style.color = '#ffffff';

      document.querySelectorAll('.input-label').forEach(el => {
        el.style.color = textColor;
      });

      document.querySelectorAll('input[type="text"], input[type="number"], select').forEach(el => {
        el.style.color = textColor;
        el.style.backgroundColor = cardColor;
        el.style.borderColor = `${textColor}20`;
      });

      document.querySelectorAll('.code-output').forEach(el => {
        el.style.backgroundColor = `${textColor}10`;
        el.style.color = textColor;
      });

      document.querySelectorAll('.converter-box').forEach(el => {
        el.style.backgroundColor = `${textColor}05`;
        el.style.borderColor = `${textColor}20`;
      });

      appTitle.style.fontFamily = `${fontFamily}, ${baseFontStack}`;
      document.querySelectorAll('.tab, .btn, .input-label, input, select, .code-output').forEach(el => {
        el.style.fontFamily = `${fontFamily}, ${baseFontStack}`;
      });

      appTitle.style.fontSize = `${fontSize * 3}px`;
      document.querySelectorAll('.tab').forEach(el => {
        el.style.fontSize = `${fontSize}px`;
      });
      document.querySelectorAll('.btn, input, select').forEach(el => {
        el.style.fontSize = `${fontSize}px`;
      });
      document.querySelectorAll('.input-label').forEach(el => {
        el.style.fontSize = `${fontSize * 0.875}px`;
      });

      appTitle.textContent = newConfig.app_title || defaultConfig.app_title;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.card_color || defaultConfig.card_color,
              set: (value) => {
                config.card_color = value;
                window.elementSdk.setConfig({ card_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_color || defaultConfig.primary_color,
              set: (value) => {
                config.primary_color = value;
                window.elementSdk.setConfig({ primary_color: value });
              }
            },
            {
              get: () => config.accent_color || defaultConfig.accent_color,
              set: (value) => {
                config.accent_color = value;
                window.elementSdk.setConfig({ accent_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["app_title", config.app_title || defaultConfig.app_title]
        ])
      });

      config = window.elementSdk.config;
      onConfigChange(config);
    }

      
// üé® BREADCRUMBS COLORI COMPLETI
(function() {
  const ol = document.getElementById('breadcrumb');
  if (!ol) return;
  
  ol.innerHTML = `
    <li><a href="https://scottino2019-glitch.github.io/web-designer/index.html" style="padding: 8px 16px; background: #dbeafe; color: #1e40af; text-decoration: none; border-radius: 9999px; font-weight: 500; box-shadow: 0 1px 3px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 6px;">üè† Home</a></li>
    <li style="color: #9ca3af; font-weight: bold; font-size: 18px; margin: 0 12px;">‚Ä∫</li>
    <li style="position: relative; display: inline-block; margin-right: 12px;">
      <span id="colori-trigger" style="padding: 8px 16px; background: #fef3c7; color: #d97706; border: 2px solid #fde68a; border-radius: 9999px; font-weight: 700; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 6px;">üé® Colori ‚ñº</span>
      <div id="colori-dropdown" style="position: absolute; top: 100%; left: 0; margin-top: 8px; width: 300px; background: rgba(255,255,255,0.98); backdrop-filter: blur(20px); border: 1px solid #e5e7eb; border-radius: 16px; box-shadow: 0 20px 40px rgba(0,0,0,0.2); opacity: 0; visibility: hidden; transform: translateY(-10px); transition: all 0.3s; z-index: 10000; padding: 8px 0;">
        <a href="colori_home.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500;">üè† Home</a>
        <a href="color-picker.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500;">  üé® Picker</a>
        <a href="designer.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500;">üñåÔ∏è Designer</a>
        <a href="designer2.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500;">‚úèÔ∏è Designer 2</a>
        <a href="generatore_colore.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500;">üî¥ Generatore Colore</a>
        <a href="generatore_di_colore.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500;">üü¢ Generatore di Colore</a>
        <a href="generatore_gradienti.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500; border-top: 1px solid #f3f4f6;">üåà Generatore Gradienti</a>
        <a href="hub_app.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500;">üì± Hub App</a>
        <a href="elementi-color.html" style="display: block; padding: 12px 20px; color: #374151; text-decoration: none; font-weight: 500;">üé®  Elementi</a>
      </div>
    </li>
    <li style="color: #9ca3af; font-weight: bold; font-size: 18px; margin: 0 12px;">‚Ä∫</li>
    <li id="current-page" style="display: flex; align-items: center;"></li>
  `;
  
  // Imposta pagina corrente (cambia il nome!)
  const currentPage = document.getElementById('current-page');
  currentPage.innerHTML = `
    <span style="padding: 8px 16px; background: #dcfce7; color: #166534; border: 2px solid #bbf7d0; border-radius: 9999px; font-weight: 800; box-shadow: 0 4px 8px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 6px;">
üõ†Ô∏è Color Tools Suite
    </span>
  `;
  
  // Dropdown events
  document.getElementById('colori-trigger').onmouseenter = () => {
    document.getElementById('colori-dropdown').style.opacity = '1';
    document.getElementById('colori-dropdown').style.visibility = 'visible';
    document.getElementById('colori-dropdown').style.transform = 'translateY(0)';
  };
  document.getElementById('colori-dropdown').onmouseleave = () => {
    document.getElementById('colori-dropdown').style.opacity = '0';
    document.getElementById('colori-dropdown').style.visibility = 'hidden';
    document.getElementById('colori-dropdown').style.transform = 'translateY(-10px)';
  };
  
  // Hover links
  document.querySelectorAll('#colori-dropdown a').forEach(link => {
    link.onmouseenter = () => {
      link.style.background = 'linear-gradient(135deg, #ec4899, #f59e0b)';
      link.style.color = 'white';
      link.style.transform = 'translateX(4px)';
    };
    link.onmouseleave = () => {
      link.style.background = '';
      link.style.color = '#374151';
      link.style.transform = '';
    };
  });
})();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a8662c15376ee59',t:'MTc2NDc5OTczOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
