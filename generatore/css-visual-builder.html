<!doctype html>
<html lang="it" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSS Visual Builder</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      box-sizing: border-box;
    }

    .preview-box {
      transition: all 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-30px); }
      to { opacity: 1; transform: translateX(0); }
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .anim-fadeIn { animation: fadeIn 0.6s ease-out; }
    .anim-slideIn { animation: slideIn 0.6s ease-out; }
    .anim-bounce { animation: bounce 1s ease-in-out infinite; }
    .anim-pulse { animation: pulse 2s ease-in-out infinite; }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 m-0 p-0 font-sans">
  <div class="w-full h-full overflow-auto">
   <div class="min-h-full p-8"><!-- Header -->
    <header class="text-center mb-12 anim-fadeIn">
     <h1 id="main-title" class="text-5xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">CSS Visual Builder</h1>
     <p id="main-subtitle" class="text-xl text-gray-600">Crea design straordinari con CSS</p>
    </header>
    <div class="max-w-7xl mx-auto">
     <div class="grid grid-cols-1 lg:grid-cols-2 gap-8"><!-- Control Panel -->
      <div class="bg-white rounded-2xl shadow-xl p-6 anim-slideIn">
       <h2 class="text-2xl font-bold mb-6 text-gray-800">üé® Pannello di Controllo</h2><!-- Glassmorphism Controls -->
       <div class="mb-6">
        <h3 class="text-lg font-semibold mb-3 text-indigo-600">‚ú® Glassmorphism</h3>
        <div class="space-y-3">
         <div><label for="blur" class="block text-sm font-medium text-gray-700 mb-1">Blur</label> <input type="range" id="blur" min="0" max="30" value="10" class="w-full"> <span id="blur-value" class="text-sm text-gray-500">10px</span>
         </div>
         <div><label for="opacity" class="block text-sm font-medium text-gray-700 mb-1">Opacit√†</label> <input type="range" id="opacity" min="0" max="100" value="80" class="w-full"> <span id="opacity-value" class="text-sm text-gray-500">0.8</span>
         </div>
        </div>
       </div><!-- Shadow Controls -->
       <div class="mb-6">
        <h3 class="text-lg font-semibold mb-3 text-purple-600">üåë Ombra</h3>
        <div class="space-y-3">
         <div><label for="shadow-x" class="block text-sm font-medium text-gray-700 mb-1">Offset X</label> <input type="range" id="shadow-x" min="-50" max="50" value="0" class="w-full"> <span id="shadow-x-value" class="text-sm text-gray-500">0px</span>
         </div>
         <div><label for="shadow-y" class="block text-sm font-medium text-gray-700 mb-1">Offset Y</label> <input type="range" id="shadow-y" min="-50" max="50" value="20" class="w-full"> <span id="shadow-y-value" class="text-sm text-gray-500">20px</span>
         </div>
         <div><label for="shadow-blur" class="block text-sm font-medium text-gray-700 mb-1">Blur Ombra</label> <input type="range" id="shadow-blur" min="0" max="100" value="40" class="w-full"> <span id="shadow-blur-value" class="text-sm text-gray-500">40px</span>
         </div>
        </div>
       </div><!-- Color Controls -->
       <div class="mb-6">
        <h3 class="text-lg font-semibold mb-3 text-rose-600">üé® Colori</h3>
        <div class="space-y-3">
         <div><label for="bg-color" class="block text-sm font-medium text-gray-700 mb-1">Colore Sfondo</label>
          <div class="flex gap-2"><input type="color" id="bg-color" value="#ffffff" class="w-16 h-10 rounded cursor-pointer"> <input type="text" id="bg-color-text" value="#ffffff" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm">
          </div>
         </div>
         <div><label for="border-color" class="block text-sm font-medium text-gray-700 mb-1">Colore Bordo</label>
          <div class="flex gap-2"><input type="color" id="border-color" value="#ffffff" class="w-16 h-10 rounded cursor-pointer"> <input type="text" id="border-color-text" value="#ffffff" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm">
          </div>
         </div>
         <div><label for="text-color" class="block text-sm font-medium text-gray-700 mb-1">Colore Testo</label>
          <div class="flex gap-2"><input type="color" id="text-color" value="#1f2937" class="w-16 h-10 rounded cursor-pointer"> <input type="text" id="text-color-text" value="#1f2937" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm">
          </div>
         </div>
        </div>
       </div><!-- Border Controls -->
       <div class="mb-6">
        <h3 class="text-lg font-semibold mb-3 text-pink-600">üìê Bordi</h3>
        <div class="space-y-3">
         <div><label for="border-width" class="block text-sm font-medium text-gray-700 mb-1">Spessore Bordo</label> <input type="range" id="border-width" min="0" max="10" value="2" class="w-full"> <span id="border-width-value" class="text-sm text-gray-500">2px</span>
         </div>
         <div><label for="border-radius" class="block text-sm font-medium text-gray-700 mb-1">Arrotondamento</label> <input type="range" id="border-radius" min="0" max="50" value="20" class="w-full"> <span id="border-radius-value" class="text-sm text-gray-500">20px</span>
         </div>
        </div>
       </div><!-- Animation Controls -->
       <div class="mb-6">
        <h3 class="text-lg font-semibold mb-3 text-green-600">üé¨ Animazioni</h3>
        <div class="space-y-2"><button id="anim-none" class="w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition">Nessuna</button> <button id="anim-fadeIn" class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition">Fade In</button> <button id="anim-slideIn" class="w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition">Slide In</button> <button id="anim-bounce" class="w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition">Bounce</button> <button id="anim-pulse" class="w-full px-4 py-2 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition">Pulse</button>
        </div>
       </div>
      </div><!-- Preview Panel -->
      <div class="bg-white rounded-2xl shadow-xl p-6 anim-slideIn" style="animation-delay: 0.1s;">
       <h2 class="text-2xl font-bold mb-6 text-gray-800">üëÅÔ∏è Anteprima</h2>
       <div class="flex items-center justify-center min-h-96">
        <div id="preview-box" class="preview-box w-64 h-64 p-8 flex items-center justify-center text-center bg-white backdrop-blur-lg border-2 border-white rounded-3xl shadow-xl">
         <div>
          <div class="text-6xl mb-4">
           üé®
          </div>
          <h3 class="text-xl font-bold text-gray-800 mb-2">Elemento CSS</h3>
          <p class="text-sm text-gray-600">Modifica i controlli per vedere gli effetti!</p>
         </div>
        </div>
       </div><!-- CSS Code Output -->
       <div class="mt-6">
        <h3 class="text-lg font-semibold mb-3 text-gray-800">üíª Codice CSS Generato</h3>
        <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
         <pre id="css-code" class="text-sm text-green-400 font-mono"></pre>
        </div><button id="copy-css" class="mt-3 w-full px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition"> üìã Copia CSS </button>
       </div>
      </div>
     </div>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      app_title: "CSS Visual Builder",
      app_subtitle: "Crea design straordinari con CSS",
      background_color: "#6366f1",
      surface_color: "#ffffff",
      text_color: "#1f2937",
      primary_action: "#8b5cf6",
      secondary_action: "#ec4899"
    };

    let currentAnimation = '';
    
    const previewBox = document.getElementById('preview-box');
    const blurInput = document.getElementById('blur');
    const opacityInput = document.getElementById('opacity');
    const shadowXInput = document.getElementById('shadow-x');
    const shadowYInput = document.getElementById('shadow-y');
    const shadowBlurInput = document.getElementById('shadow-blur');
    const borderWidthInput = document.getElementById('border-width');
    const borderRadiusInput = document.getElementById('border-radius');
    const bgColorInput = document.getElementById('bg-color');
    const bgColorText = document.getElementById('bg-color-text');
    const borderColorInput = document.getElementById('border-color');
    const borderColorText = document.getElementById('border-color-text');
    const textColorInput = document.getElementById('text-color');
    const textColorText = document.getElementById('text-color-text');
    const cssCodeElement = document.getElementById('css-code');

    function hexToRgb(hex) {
      const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
      return result ? {
        r: parseInt(result[1], 16),
        g: parseInt(result[2], 16),
        b: parseInt(result[3], 16)
      } : { r: 255, g: 255, b: 255 };
    }

  function updatePreview() {
  const blur = blurInput.value;
  const opacity = opacityInput.value / 100;
  const shadowX = shadowXInput.value;
  const shadowY = shadowYInput.value;
  const shadowBlur = shadowBlurInput.value;
  const borderWidth = borderWidthInput.value;
  const borderRadius = borderRadiusInput.value;
  const bgColor = bgColorInput.value;
  const borderColor = borderColorInput.value;
  const textColor = textColorInput.value;
  const animation = currentAnimation || 'none';

  // Aggiorna valori UI
  document.getElementById('blur-value').textContent = blur + 'px';
  document.getElementById('opacity-value').textContent = opacity.toFixed(2);
  document.getElementById('shadow-x-value').textContent = shadowX + 'px';
  document.getElementById('shadow-y-value').textContent = shadowY + 'px';
  document.getElementById('shadow-blur-value').textContent = shadowBlur + 'px';
  document.getElementById('border-width-value').textContent = borderWidth + 'px';
  document.getElementById('border-radius-value').textContent = borderRadius + 'px';

  // Applica stile live alla preview nell‚Äôapp
  const bgRgb = hexToRgb(bgColor);
  previewBox.style.backdropFilter = `blur(${blur}px)`;
  previewBox.style.webkitBackdropFilter = `blur(${blur}px)`;
  previewBox.style.backgroundColor = `rgba(${bgRgb.r}, ${bgRgb.g}, ${bgRgb.b}, ${opacity})`;
  previewBox.style.boxShadow = `${shadowX}px ${shadowY}px ${shadowBlur}px rgba(0,0,0,0.35)`;
  previewBox.style.border = `${borderWidth}px solid ${borderColor}`;
  previewBox.style.borderRadius = `${borderRadius}px`;
  previewBox.style.color = textColor;

  // Gestione animazione preview
  previewBox.classList.remove('anim-fadeIn', 'anim-slideIn', 'anim-bounce', 'anim-pulse');
  if (animation !== 'none') {
    previewBox.classList.add(animation);
  }

  // Nome animazione (fadeIn, slideIn, bounce, pulse)
  const animName = animation.replace('anim-', '');

  // Keyframes combinati stile "bella card"
  let entranceKeyframes = `
@keyframes entrance {
  0%   { opacity: 0; transform: translateY(40px) scale(0.95); }
  60%  { opacity: 1; transform: translateY(0) scale(1.02); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}`;

  let extraAnimKeyframes = '';
  let extraAnimName = '';

  if (animName === 'fadeIn') {
    // solo entrance gi√† va bene
    extraAnimName = '';
  } else if (animName === 'slideIn') {
    extraAnimKeyframes = `
@keyframes slideIn {
  from { opacity: 0; transform: translateX(-30px); }
  to   { opacity: 1; transform: translateX(0); }
}`;
    extraAnimName = 'slideIn';
  } else if (animName === 'bounce') {
    extraAnimKeyframes = `
@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50%      { transform: translateY(-10px); }
}`;
    extraAnimName = 'bounce';
  } else if (animName === 'pulse') {
    extraAnimKeyframes = `
@keyframes softPulse {
  0%, 100% { transform: scale(1); }
  50%      { transform: scale(1.03); }
}`;
    extraAnimName = 'softPulse';
  }

  // Stringa animation per la card finale
  let animationCss = `animation: entrance 0.8s ease-out both`;
  if (extraAnimName) {
    animationCss += `, ${extraAnimName} 3s ease-in-out 0.8s infinite`;
  }

  // HTML COMPLETO stile "bella card", ma con i valori scelti
  const fullHtml = `<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Glassmorphism Card</title>
  <style>
    /* SFONDO */
    body {
      background: radial-gradient(circle at top left, #4f46e5, #ec4899);
      min-height: 100vh;
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: #f9fafb;
    }

    ${entranceKeyframes}
    ${extraAnimKeyframes}

    .glass-card {
      width: min(420px, 90vw);
      min-height: 220px;
      padding: 2.5rem;
      border-radius: ${borderRadius}px;
      border: ${borderWidth}px solid ${borderColor};
      background: rgba(${bgRgb.r}, ${bgRgb.g}, ${bgRgb.b}, ${opacity.toFixed(2)});
      box-shadow: ${shadowX}px ${shadowY}px ${shadowBlur}px rgba(0, 0, 0, 0.35);
      backdrop-filter: blur(${blur}px);
      -webkit-backdrop-filter: blur(${blur}px);
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      justify-content: center;
      gap: 0.75rem;
      color: ${textColor};
      text-align: left;
      transition: all 0.3s ease;
      ${animationCss};
    }

    .glass-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.25rem 0.7rem;
      border-radius: 999px;
      font-size: 0.75rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: rgba(15, 23, 42, 0.12);
      color: ${textColor};
    }

    .glass-title {
      font-size: 1.5rem;
      font-weight: 700;
    }

    .glass-text {
      font-size: 0.95rem;
      opacity: 0.85;
    }

    .glass-actions {
      margin-top: 1rem;
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .btn-primary {
      padding: 0.6rem 1.2rem;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 600;
      background: linear-gradient(135deg, #4f46e5, #ec4899);
      color: #ffffff;
      box-shadow: 0 12px 30px rgba(79, 70, 229, 0.5);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 40px rgba(79, 70, 229, 0.6);
    }

    .btn-ghost {
      padding: 0.6rem 1.2rem;
      border-radius: 999px;
      border: 1px solid rgba(15, 23, 42, 0.25);
      background: rgba(255, 255, 255, 0.12);
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      color: ${textColor};
      transition: background 0.15s ease, transform 0.15s ease;
    }

    .btn-ghost:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-1px);
    }
  </style>
</head>
<body>
  <div class="glass-card">
    <span class="glass-badge">Glassmorphism UI</span>
    <h1 class="glass-title">Interfaccia moderna e pulita</h1>
    <p class="glass-text">
      Questo layout usa i valori che hai scelto nel builder (blur, colori, ombra, bordi, animazioni).
    </p>
    <div class="glass-actions">
      <button class="btn-primary">Azione principale</button>
      <button class="btn-ghost">Secondaria</button>
    </div>
  </div>
</body>
</html>`;

  cssCodeElement.textContent = fullHtml;
}
  
  




  
   
    function setAnimation(animClass) {
      previewBox.className = 'preview-box w-64 h-64 p-8 flex items-center justify-center text-center bg-white backdrop-blur-lg border-2 border-white rounded-3xl shadow-xl';
      if (animClass) {
        previewBox.classList.add(animClass);
      }
      currentAnimation = animClass;
    }

    // Color picker and text input sync
    bgColorInput.addEventListener('input', (e) => {
      bgColorText.value = e.target.value;
      updatePreview();
    });
    bgColorText.addEventListener('input', (e) => {
      if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
        bgColorInput.value = e.target.value;
        updatePreview();
      }
    });

    borderColorInput.addEventListener('input', (e) => {
      borderColorText.value = e.target.value;
      updatePreview();
    });
    borderColorText.addEventListener('input', (e) => {
      if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
        borderColorInput.value = e.target.value;
        updatePreview();
      }
    });

    textColorInput.addEventListener('input', (e) => {
      textColorText.value = e.target.value;
      updatePreview();
    });
    textColorText.addEventListener('input', (e) => {
      if (/^#[0-9A-F]{6}$/i.test(e.target.value)) {
        textColorInput.value = e.target.value;
        updatePreview();
      }
    });

    blurInput.addEventListener('input', updatePreview);
    opacityInput.addEventListener('input', updatePreview);
    shadowXInput.addEventListener('input', updatePreview);
    shadowYInput.addEventListener('input', updatePreview);
    shadowBlurInput.addEventListener('input', updatePreview);
    borderWidthInput.addEventListener('input', updatePreview);
    borderRadiusInput.addEventListener('input', updatePreview);

    document.getElementById('anim-none').addEventListener('click', () => setAnimation(''));
    document.getElementById('anim-fadeIn').addEventListener('click', () => setAnimation('anim-fadeIn'));
    document.getElementById('anim-slideIn').addEventListener('click', () => setAnimation('anim-slideIn'));
    document.getElementById('anim-bounce').addEventListener('click', () => setAnimation('anim-bounce'));
    document.getElementById('anim-pulse').addEventListener('click', () => setAnimation('anim-pulse'));

    document.getElementById('copy-css').addEventListener('click', () => {
      const cssText = cssCodeElement.textContent;
      navigator.clipboard.writeText(cssText).then(() => {
        const btn = document.getElementById('copy-css');
        const originalText = btn.textContent;
        btn.textContent = '‚úÖ Copiato!';
        btn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
        btn.classList.add('bg-green-600');
        setTimeout(() => {
          btn.textContent = originalText;
          btn.classList.remove('bg-green-600');
          btn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
        }, 2000);
      });
    });

    async function onConfigChange(config) {
      const titleElement = document.getElementById('main-title');
      const subtitleElement = document.getElementById('main-subtitle');
      
      titleElement.textContent = config.app_title || defaultConfig.app_title;
      subtitleElement.textContent = config.app_subtitle || defaultConfig.app_subtitle;

      const bgGradient = config.background_color || defaultConfig.background_color;
      document.body.style.background = `linear-gradient(to bottom right, ${bgGradient}15, ${config.primary_action || defaultConfig.primary_action}15, ${config.secondary_action || defaultConfig.secondary_action}15)`;
      
      titleElement.style.backgroundImage = `linear-gradient(to right, ${bgGradient}, ${config.primary_action || defaultConfig.primary_action})`;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action || defaultConfig.primary_action,
              set: (value) => {
                config.primary_action = value;
                window.elementSdk.setConfig({ primary_action: value });
              }
            },
            {
              get: () => config.secondary_action || defaultConfig.secondary_action,
              set: (value) => {
                config.secondary_action = value;
                window.elementSdk.setConfig({ secondary_action: value });
              }
            }
          ],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ["app_title", config.app_title || defaultConfig.app_title],
          ["app_subtitle", config.app_subtitle || defaultConfig.app_subtitle]
        ])
      });
    }

    updatePreview();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ab02ccef7a8edca',t:'MTc2NTIzNzkzMS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>